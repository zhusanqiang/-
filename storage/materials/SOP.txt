=====================
环境：

1.下载安装https://www.docker.com/get-started/，(参考:下载安装docker.png);安装wsl: wsl --install
2.安装完成电脑会自动重启，登录docker(比如选择Gmail账号登录，参考:登录docker.png)
3.docker右上角的Settings，选择左侧的Docker Engine设置：
{
  "builder": {
    "gc": {
      "defaultKeepStorage": "20GB",
      "enabled": true
    }
  },
  "dns": [
    "8.8.8.8",
    "1.1.1.1"
  ],
  "experimental": false,
  "ipv6": false,
  "registry-mirrors": [
      "https://hub-mirror.c.163.com",
      "https://docker.mirrors.ustc.edu.cn"
  ]
}

拉取时缺少啥则手工pull,例如：
docker pull nginx:alpine
docker pull node:18-alpine

如果你有 Clash、V2Ray、Proxifier 等工具，配置 Docker 走代理：
set HTTP_PROXY=http://127.0.0.1:7890
set HTTPS_PROXY=http://127.0.0.1:7890
docker-compose up --build

清理缓存(可选)
docker system prune -a

4.*：编辑 `.env` 文件，填入您的Dify `API_URL`, `API_KEY`, 和 `APP_ID`。
5. 在legal_document_assistant所在目录下执行：docker-compose up --build，例如：
D:\study\test\legal_document_assistant>docker-compose up --build

log出现下面这个表示成功：
legal_doc_backend   | INFO:     Started server process [8]
legal_doc_backend   | INFO:     Waiting for application startup.
legal_doc_backend   | INFO:     Application startup complete.

打开前端开始操作：http://localhost:8080/

6.如果docker-compose up --build -d (也就是放到后台去看)，此时查看log:docker-compose logs -


=====================
问答：

我如果把整个docker部署在服务器上后，公网怎么能访问？
这是一个非常棒的部署问题！答案就在我们的 docker-compose.yml 文件里。
核心原理：端口映射 (Port Mapping)
我们的 docker-compose.yml 文件中为 frontend 服务配置了端口映射：
code
Yaml
frontend:
  # ...
  ports:
    - "8080:80"
这行代码是关键，它的意思是：“将服务器（Host）的 8080 端口，映射到frontend 容器的 80 端口。”
部署到服务器后的访问流程：
您在服务器上：您会把整个 legal_document_assistant 项目文件夹上传到您的云服务器上，并在服务器上安装好 Docker。
启动应用：您在服务器的终端里，同样运行 docker-compose up --build -d ( -d 参数表示在后台运行)。
Docker 工作：Docker 在服务器上启动了所有容器，并根据 ports 配置，开始监听服务器的 8080 端口，并将所有流向这个端口的流量转发给 frontend 容器。
您在公网：您需要知道您服务器的公网 IP 地址（比如 123.45.67.89）。
配置安全组/防火墙：这是最关键的一步！云服务器默认会关闭所有端口以保证安全。 您需要登录您的云服务商（如阿里云、腾讯云）的控制台，找到您服务器的**“安全组”或“防火墙”配置，添加入站规则，明确允许公网访问您服务器的 8080 端口**。
最终访问：完成以上步骤后，您就可以在世界上任何地方的浏览器中，通过 http://<您的服务器公网IP>:8080 来访问您的应用了。例如：http://123.45.67.89:8080。
如何更专业一点（使用域名和标准端口）？
您可以注册一个域名（比如 mylegalapp.com），并将其解析到您服务器的公网 IP。
您可以将 docker-compose.yml 中的端口映射修改为 "80:80"。80 端口是 HTTP 协议的默认端口。这样，在配置好安全组允许 80 端口后，您就可以直接通过 http://mylegalapp.com 访问，而无需在后面加 :8080 了。

2.有时修改后重新编译不起效，怎么解决？
答：docker-compose build --no-cache，再docker-compose up