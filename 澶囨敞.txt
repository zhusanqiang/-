### 如何运行

条件：
下载docker desktop for windows:
https://www.docker.com/products/docker-desktop/

WSL下载安装。

步骤：
1.  将以上所有代码块保存到您本地对应的文件和目录中。
2.  打开您的终端，导航到项目根目录 (`legal_document_assistant`)。
3.  **最重要**：编辑 `.env` 文件，填入您的Dify `API_URL`, `API_KEY`, 和 `APP_ID`。
4.  运行命令 `docker-compose up --build`。或者docker-compose up --build -d。-d 代表 detached (分离)模式，它会启动所有服务，然后把终端还给您，服务会在后台静默运行。
5.  等待Docker完成所有镜像的构建和容器的启动。
6.  在您的浏览器中打开 `http://localhost:8080`。


我如果把整个docker部署在服务器上后，公网怎么能访问？
这是一个非常棒的部署问题！答案就在我们的 docker-compose.yml 文件里。
核心原理：端口映射 (Port Mapping)
我们的 docker-compose.yml 文件中为 frontend 服务配置了端口映射：
code
Yaml
frontend:
  # ...
  ports:
    - "8080:80"
这行代码是关键，它的意思是：“将服务器（Host）的 8080 端口，映射到frontend 容器的 80 端口。”
部署到服务器后的访问流程：
您在服务器上：您会把整个 legal_document_assistant 项目文件夹上传到您的云服务器上，并在服务器上安装好 Docker。
启动应用：您在服务器的终端里，同样运行 docker-compose up --build -d ( -d 参数表示在后台运行)。
Docker 工作：Docker 在服务器上启动了所有容器，并根据 ports 配置，开始监听服务器的 8080 端口，并将所有流向这个端口的流量转发给 frontend 容器。
您在公网：您需要知道您服务器的公网 IP 地址（比如 123.45.67.89）。
配置安全组/防火墙：这是最关键的一步！云服务器默认会关闭所有端口以保证安全。 您需要登录您的云服务商（如阿里云、腾讯云）的控制台，找到您服务器的**“安全组”或“防火墙”配置，添加入站规则，明确允许公网访问您服务器的 8080 端口**。
最终访问：完成以上步骤后，您就可以在世界上任何地方的浏览器中，通过 http://<您的服务器公网IP>:8080 来访问您的应用了。例如：http://123.45.67.89:8080。
如何更专业一点（使用域名和标准端口）？
您可以注册一个域名（比如 mylegalapp.com），并将其解析到您服务器的公网 IP。
您可以将 docker-compose.yml 中的端口映射修改为 "80:80"。80 端口是 HTTP 协议的默认端口。这样，在配置好安全组允许 80 端口后，您就可以直接通过 http://mylegalapp.com 访问，而无需在后面加 :8080 了。


================
docker-compose up --build -d ，接着：
| 您做了什么修改？ | 您应该运行什么命令？ |
| :--- | :--- |
| **修改了任何 `.py` 后端代码** | **什么都不用做**，Uvicorn 会自动重启。 |
| **修改了任何 `.tsx`, `.css` 前端代码** | 在**新终端**里运行 `docker-compose exec frontend npm run build`，然后刷新浏览器。 |
| **修改了 `package.json` 或 `requirements.txt`** | 停止服务 (`docker-compose down`)，然后运行 `docker-compose up --build`。 |
| **修改了 `Dockerfile`** | 停止服务，然后运行 `docker-compose up --build`。 |

新开一个窗口看log：docker-compose logs -f